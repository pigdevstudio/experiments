name: Push to itch.io

on:
  push:
    branches:
      - pipeline/*
    tags:
      - v*.*.*

jobs:
  godot:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        platform: []
    steps:
      - name: Zip
      - uses: montudor/action-zip@v0.1.0
        with:
          args: zip -qq -r ./dir.zip ./dir
      - id: zip
      - name: Push to Itch
        uses: josephbmanley/butler-publish-itchio-action@v1.0.1
        env:
          CHANNEL: experiments-bundle
          ITCH_GAME: experiments
          ITCH_USER: pigdev
          PACKAGE: ${{ github.workspace }}/${{ steps.zip.outputs.build }}
          BUTLER_CREDENTIALS: ${{ secrets.BUTLER_CREDENTIALS }}
          VERSION_FILE: VERSION.txt
